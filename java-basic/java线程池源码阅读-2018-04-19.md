最近对线程池的实现比较感心情，故对`TheadPoolExecutor`进行了分析阅读，对阅读中的知识点进行了整理记录，以做备忘。

### 概要

线程池对每个提交进来的任务及执行任务的线程进行管理，通常我们使用`Executors`工厂类的各个方法来创建线程池对象。

而该类主要有以下创建线程池的方法

1. newFixedThreadPool // 创建固定数量线程的线程池
2. newWorkStealingPool // 创建提供fork-join的并行处理池
3. newSingleThreadExecutor // 创建单一线程的线程池
4. newCachedThreadPool // 创建缓存的线程池，`最常用`
5. newSingleThreadScheduledExecutor // 创建单一线程的定时调度线程池
6. newScheduledThreadPool // 创建定时调度线程池

同时还有对默认线程工厂`DefaultThreadFactory`的实现

线程池主要解决一下两个问题：

1. 由于减少了每个任务的调用开销（主要是线程的创建和销毁，而这花费的时间可能比任务本身执行所花的时间更多），所以执行大量异步任务时可以提升性能；
2. 提供捆绑和管理各种资源，包括：线程和任务的执行、简单的统计和中断；

### 继承层次

- ThreadPoolExecutor [class]
  - AbstractExecutorService [class]
    - ExecutorService [Interface]
      - Executor [Interface]

### ctl变量

### ThreadPoolExecutor源码分析

1. ThreadPoolExecutor构造方法
2. execute方法
3. addWorker方法
4. Worker对象
5. runWorker方法
6. getTask方法
7. processWorkerExit方法
8. tryTerminate方法

### ThreadPoolExecutor生命周期

1. shutdown
2. shutdownNow
3. awaitTermination
4. 生命周期扩展点

### ThreadPoolExecutor拒绝策略